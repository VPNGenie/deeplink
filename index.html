<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Deep Link Redirect</title>
</head>
<body>
  <h2>Если переход не сработал, нажмите на ссылку:</h2>
  <p id="link"></p>

<script>
(function() {
  const params = new URLSearchParams(window.location.search);
  let cfg = params.get('cfg'); // cfg уже должен быть URL-encoded

  if (!cfg) {
    document.getElementById('link').textContent = "Параметр cfg не указан.";
    return;
  }

  try {
    // decodeURIComponent на случай спецсимволов
    cfg = decodeURIComponent(cfg);

    // Автоматический редирект
    window.location.href = cfg;

    // fallback ссылка
    const linkContainer = document.getElementById('link');
    const a = document.createElement('a');
    a.href = cfg;
    a.textContent = "Открыть вручную";
    a.style.fontSize = "20px";
    a.style.color = "#007bff";
    linkContainer.appendChild(a);

  } catch (e) {
    console.error(e);
    document.getElementById('link').textContent = "Ошибка редиректа cfg";
  }
})();
</script>
</body>
</html>
